<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="05팔로워피드.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">

</head>

<body>
    <!-- 메뉴 -->
    <div class="menu">
        <div class="top">
            <div class="home">
                <button type="button" onclick="location.href='../1.지도/map_page/map.html'">
                    <img src="img/Home.png" alt="">
                </button>
            </div>
            <div class="search">
                <button type="button" onclick="location.href='../3.추천피드/followfeed.html'">
                    <img src="img/search.png" alt="">
                </button>
            </div>
            <div class="follower">
                <button type="button" onclick="location.href='05팔로워피드.html'">
                    <img src="img/Compass.png" alt="">
                </button>
            </div>
            <div class="rank">
                <button type="button" onclick="location.href='../4.가게순위/html/rank.html'">
                    <img src="img/Award.png" alt="">
                </button>
            </div>
        </div>

        <div class="bottom">
            <div class="mypage">
                <button type="button" onclick="location.href='../2.마이페이지/mypage.html'">
                    <img src="img/User.png" alt="">
                </button>
            </div>
            <div class="login-icon">
                <button type="button" onclick="location.href='../2.마이페이지/login.html'">
                    <img src="img/Log in.png" alt="">
                </button>
            </div>
        </div>
    </div>
    <!-- 게시글 -->
    <div class="post">
        <div class="content">
            <div class="user">
                <a href="#"><img src="icon/profile.png" alt="프로필"></a>
                <p>user_1</p>
            </div>

            <div class="slider">
                <img class="slide" src="icon/food1.png" alt="음식1">
                <img class="slide" src="icon/음식2.jpeg" alt="음식2">
                <img class="slide" src="icon/음식3.jpeg" alt="음식3">

                <button id="prev"><img src="icon/angle-left.png" alt="왼쪽버튼"></button>
                <button id="next"><img src="icon/angle-right.png" alt="오른쪽버튼"></button>

                <ul class="dots">
                    <li data-index="0" class="dot active"></li>
                    <li data-index="1" class="dot"></li>
                    <li data-index="2" class="dot"></li>
                </ul>
            </div>  




            <div class="info">
                <div class="comment">
                    <ul>
                        <li><a href="#"><img src="icon/heart.png" alt="하트"></a></li>
                        <li><a href="#"><img src="icon/comment.png" alt="댓글"></a></li>
                        <li>
                            <p class="count">17</p>
                        </li>
                        <li><a href="#"><img class="tag" src="icon/tag.png" alt="태그"></a></li>
                    </ul>
                </div>

                <div class="right-info">
                    <div class="star">
                        <ul>
                            <li><a href="#"><img src="icon/Star.png" alt="별점"></a></li>
                            <li><a href="#"><img src="icon/Star.png" alt="별점"></a></li>
                            <li><a href="#"><img src="icon/Star.png" alt="별점"></a></li>
                            <li><a href="#"><img src="icon/Star.png" alt="별점"></a></li>
                            <li><a href="#"><img src="icon/Star.png" alt="별점"></a></li>
                        </ul>
                    </div>
                    <div class="res-info">
                        <p class="res-name">오오기리</p>
                        <p class="res-type"> 일식</p>
                    </div>
                </div>
            </div>


            <div class="post-text">
                <p class="short-text">처음에 왔을 때는 실패했는데 이번엔는 브레이크 타임 전에 오는데 성공했습니다. 우동 국물이 진국이더라고요, 주먹밥도 짭조름한 게 좋았습니다. 다만
                    아쉬웠던 건 가라아게는 메뉴가 재정비 중이라 주문이 안 되는 상황이었습니다.나중에 가라아게가 되면, 그 때 또 와보려 합니다. 좋은 식당이에요 </p>
                <button class="read-more-btn">더보기</button>
            </div>
        </div>

        <div class="comment-box hidden">
            <h3>댓글</h3>

            <div class="comment-item">
                <a href="#"><img src="icon/profile.png" alt="프로필" class="comment-profile"></a>
                <div class="comment-content">
                    <p class="comment-user">user_1</p>
                    <p class="comment-text">와우 맛있겠다~</p>
                    <button type="button" class="reply-btn">답글 달기</button>
                    <div class="replies"></div>
                </div>
                <a href="#"><img src="icon/heart.png" alt="하트" class="comment-like"></a>
            </div>

            <div class="comment-item">
                <a href="#"><img src="icon/profile.png" alt="프로필" class="comment-profile"></a>
                <div class="comment-content">
                    <p class="comment-user">user_2</p>
                    <p class="comment-text">여기 진짜 분위기 좋아보여!</p>
                    <button type="button" class="reply-btn">답글 달기</button>
                    <div class="replies"></div>
                </div>
                <a href="#"><img src="icon/heart.png" alt="하트" class="comment-like"></a>
            </div>
        </div>

        <!-- 식당정보 -->
         <div class="split-view">
            <div class="split-right-info">
                        <div class="restaurant-info-header">
                            <h3>울밀대 강남점 <img src="img/link.png"></h3>
                            <div class="rating-and-reviews">
                                <p class="rating-info"><img src="img/pin.png" alt="pin"> 2345개</p>
                                <span class="review-count">리뷰(3902건)</span>
                            </div>
                            <p class="details">서울 강남구 역삼로4길 46 지하1층(우) 06241(지번) 역삼동 826-37<br>02-552-1922</p>
                        </div>
                        <div class="other-reviews">
                            <div class="review-item">
                                <div class="review-container">
                                    <div class="review-left">
                                        <img src="img/food.jpg" class="review-image">
                                    </div>
                                    <div class="review-right">
                                        <div class="review-header">
                                            <div class="profile-dot small green"></div>
                                            <div class="user-info">
                                                <strong>user_123</strong>
                                            </div>
                                            <div class="review-rating-mini">
                                                <img src="img/pin.png"><img src="img/pin.png"><img src="img/pin.png"><img src="img/pin.png">
                                            </div>
                                        </div>
                                        <div class="review-content-body">
                                            <p>처음에 왔을 때는 실패했는데 이번에는 브레이크 타임 전에 오는 데 성공했습니다.</p>
                                            <div class="review-actions-mini">
                                                <img src="img/heart.png" alt="Like">
                                                <div class="comment-action-wrapper-mini">
                                                    <img src="img/save.png" alt="Comment">
                                                    <p class="comment-count-mini">17</p>
                                                </div>
                                                <img src="img/chat.png" alt="Save">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="review-item">
                                <div class="review-container">
                                    <div class="review-left">
                                        <img src="img/food.jpg" class="review-image">
                                    </div>
                                    <div class="review-right">
                                        <div class="review-header">
                                            <div class="profile-dot small blue"></div>
                                            <div class="user-info">
                                                <strong>user_78</strong>
                                            </div>
                                            <div class="review-rating-mini">
                                                <img src="img/pin.png"><img src="img/pin.png"><img src="img/pin.png"><img src="img/pin.png"><img src="img/pin.png">
                                            </div>
                                        </div>
                                        <div class="review-content-body">
                                            <p>존맛탱입니다~</p>
                                            <div class="review-actions-mini">
                                                <img src="img/heart.png" alt="Like">
                                                <div class="comment-action-wrapper-mini">
                                                    <img src="img/save.png" alt="Comment">
                                                    <p class="comment-count-mini">17</p>
                                                </div>
                                                <img src="img/chat.png" alt="Save">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

       
    </div>

    
    

    

    
 
    <script>
      const resInfo = document.querySelector(".res-info");
        const splitView = document.querySelector(".split-view"); 
        const commentBox = document.querySelector(".comment-box");
        const postBox = document.querySelector(".post");

        const commentBtn = document.querySelector('.comment img[alt="댓글"]');

        // 식당 정보 클릭
        resInfo.addEventListener("click", () => {
        // 댓글창 무조건 닫기
        commentBox.classList.remove("active");
        postBox.style.width = "500px";

        // 식당창 토글
        if (splitView.style.display === "flex") {
            // 열려있으면 닫기
            splitView.style.display = "none";
        } else {
            // 닫혀있으면 열기
            splitView.style.display = "flex";
        }
        });



        // 댓글 클릭
        commentBtn.addEventListener('click', (e) => {
            e.preventDefault();

            // 식당 정보창 닫기
            splitView.style.display = "none";

            // 댓글창 토글
            if (commentBox.classList.contains('active')) {
                commentBox.classList.remove('active');
                postBox.style.width = "500px";
            } else {
                commentBox.classList.add('active');
                postBox.style.width = "1000px";
            }
        });


        // --- 기존 슬라이더, 하트, 답글 등 JS 그대로 유지 ---
        // 슬라이더
        const slides = document.querySelectorAll('.slide');
        const dots = document.querySelectorAll('.dot');
        const prevBtn = document.getElementById('prev');
        const nextBtn = document.getElementById('next');
        let currentIndex = 0;

        function showSlide(index) {
            slides.forEach((slide, i) => {
                slide.style.display = i === index ? 'block' : 'none';
            });
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });
        }

        // 사진 높이 고정
        function updateSliderHeight() {
            const slider = document.querySelector(".slider");
            const firstImg = document.querySelector(".slide");
            slider.style.height = firstImg.clientHeight + "px"; // 첫번째 이미지 기준
        }

        window.addEventListener("load", updateSliderHeight);
        window.addEventListener("resize", updateSliderHeight);

        // 초기 슬라이드
        showSlide(currentIndex);

        // 다음 버튼
        nextBtn.addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % slides.length;
            showSlide(currentIndex);
        });

        // 이전 버튼
        prevBtn.addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + slides.length) % slides.length;
            showSlide(currentIndex);
        });

        // 점 클릭 시 이동
        dots.forEach(dot => {
            dot.addEventListener('click', () => {
                currentIndex = parseInt(dot.dataset.index);
                showSlide(currentIndex);
            });
        });

        // 글 더보기
        const readMoreBtn = document.querySelector('.read-more-btn');
        const shortText = document.querySelector('.short-text');

        readMoreBtn.addEventListener('click', () => {
            if (shortText.style.webkitLineClamp === "none") {
                shortText.style.webkitLineClamp = "2";
                readMoreBtn.textContent = "더보기";
            } else {
                shortText.style.webkitLineClamp = "none";
                readMoreBtn.textContent = "접기";
            }
        });

        // 하트 토글
        const heartIcon = document.querySelector('.comment img');
        let liked = false;

        heartIcon.addEventListener('click', () => {
            liked = !liked;
            heartIcon.src = liked ? 'icon/heart-red.png' : 'icon/heart.png';
        });

        // 댓글 하트 토글
        const commentLikes = document.querySelectorAll('.comment-like');

        commentLikes.forEach(like => {
            let liked = false;
            like.addEventListener('click', (e) => {
                e.preventDefault();
                liked = !liked;
                like.src = liked ? 'icon/heart-red.png' : 'icon/heart.png';
            });
        });

        // 답글 버튼
        const replyBtns = document.querySelectorAll('.reply-btn');

        replyBtns.forEach(btn => {
            btn.addEventListener('click', (e) => {
                const commentContent = e.target.closest('.comment-content');
                const repliesDiv = commentContent.querySelector('.replies');

                // 이미 답글 입력창이 있으면 제거
                const existingForm = repliesDiv.querySelector('.reply-form');
                if (existingForm) {
                    existingForm.remove();
                    return;
                }

                // 답글 입력 폼 생성
                const formHTML = document.createElement('div');
                formHTML.classList.add('reply-form');
                formHTML.innerHTML = `
                    <a href="#"><img src="icon/profile.png" alt="프로필" class="comment-profile"></a>
                    <input type="text" class="reply-input" placeholder="댓글을 입력하세요">
                    <div class="reply-buttons">
                        <button class="reply-submit">등록</button>
                        <button class="reply-cancel">취소</button>
                    </div>
                `;
                repliesDiv.appendChild(formHTML);

                const submitBtn = formHTML.querySelector('.reply-submit');
                const cancelBtn = formHTML.querySelector('.reply-cancel');
                const input = formHTML.querySelector('.reply-input');

                submitBtn.addEventListener('click', () => {
                    if (input.value.trim() === "") return;

                    const newReply = document.createElement('div');
                    newReply.classList.add('comment-item');
                    newReply.innerHTML = `
                    <a href="#"><img src="icon/profile.png" alt="프로필" class="comment-profile"></a>
                    <div class="comment-content">
                        <p class="comment-user">user_1</p>
                        <p class="comment-text">${input.value}</p>
                    </div>
                    <a href="#"><img src="icon/heart.png" alt="하트" class="comment-like"></a>
                    `;

                    const heart = newReply.querySelector('.comment-like');
                    heart.addEventListener('click', (e) => {
                    const img = e.target;
                    if (img.src.includes("heart.png")) {
                        img.src = "icon/heart-red.png";
                    } else {
                        img.src = "icon/heart.png";
                    }
                    });

                    repliesDiv.appendChild(newReply);
                    formHTML.remove();

                });
            });
        });

        // 북마크 클릭
        let tag = document.querySelector(".tag");

        tag.addEventListener("click", function () {
            tag.classList.toggle("fill");
        });


    </script>

</body>

</html>