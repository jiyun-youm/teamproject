<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>검색 페이지</title>
<style>
    :root {
        --main-theme-color: #F8C74D;
        --text-color-light: #555;
        --border-color: #eee;
        --bg-color-light: #f9f9f9;
    }
    
    body { margin:0; font-family:'Noto Sans KR', sans-serif; }
    .page { display: none; height: 100vh; overflow: hidden; }
    .active { display: flex; }

    /* 사이드바 */
    .sidebar { width:60px; background:#fff; border-right:1px solid var(--border-color); display:flex; flex-direction:column; align-items:center; padding:20px 0 10px; gap:25px; position:fixed; left:0; top:0; bottom:0; justify-content:space-between; box-sizing:border-box; }
    .sidebar-top-icons, .sidebar-bottom-icons { display:flex; flex-direction:column; align-items:center; gap:25px; }
    .sidebar-icon { width:26px; height:26px; cursor:pointer; }

    /* 피드 */
    .feed-wrapper { margin-left:60px; flex:1; display:flex; flex-direction:column; background:var(--bg-color-light); }
    .feed-header { display:flex; align-items:center; justify-content:space-between; padding:12px 20px; background:#fff; border-bottom:1px solid var(--border-color); position:sticky; top:0; z-index:10; }
    .feed-header-left { display:flex; flex:1; align-items:center; }
    .feed-header input { flex:1; margin-right:10px; padding:10px 15px; border:1px solid #ddd; border-radius:20px; font-size:14px; outline:none; }
    .feed-header button { color:#fff; background-color:var(--main-theme-color); border:none; padding:10px 18px; border-radius:20px; cursor:pointer; font-size:14px; font-weight:bold; }
    .current-location { margin-left:15px; font-size:14px; color:#777; white-space:nowrap; }

    .feed { flex:1; overflow-y:auto; padding:16px; display:grid; grid-template-columns:repeat(auto-fill, minmax(250px,1fr)); grid-auto-rows:250px; gap:12px; box-sizing:border-box; width:100%; max-width:100%; margin:0 auto; }
    .thumbnail { position:relative; cursor:pointer; border-radius:8px; overflow:hidden; box-shadow:0 1px 3px rgba(0,0,0,0.08); display:flex; align-items:center; justify-content:center; }
    .thumbnail img { width:100%; height:100%; object-fit:cover; }
    .thumbnail.square { grid-row:span 1; }
    .thumbnail.shorts { grid-row:span 2; }

    /* 게시물 */
    .post-container { flex:1; margin-left:60px; display:flex; justify-content:center; align-items:center; background:var(--bg-color-light); position:relative; }
    .post-card { width:70%; max-width:800px; background:#fff; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.1); overflow:hidden; max-height:90vh; display:flex; flex-direction:column; }
    .post-header { display:flex; align-items:center; gap:8px; padding:12px 15px; flex-shrink:0; }
    .post-header span { font-weight:bold; color:#333; }
    .profile-dot { width:24px; height:24px; border-radius:50%; background:var(--main-theme-color); margin-right:4px; flex-shrink:0; }
    .post-img { width: 90%; object-fit:contain; background-color:#eee; flex-grow:1; margin: 0 auto; }
    .post-content { padding:15px; font-size:15px; color:#333; line-height:1.4; flex-shrink:0; }
    .post-footer { display:flex; justify-content:space-between; align-items:center; padding:12px 15px; border-top:1px solid var(--border-color); flex-shrink:0; }
    .icons { display:flex; gap:16px; font-size:20px; color:var(--text-color-light); }
    .icons img { width:20px; height:20px; cursor:pointer; }
    .post-footer span:last-child { font-weight:bold; color:var(--main-theme-color); font-size:16px; }
    .back-btn { cursor:pointer; font-size:20px; color:#777; margin-right:15px; font-weight:bold; }

    /* Split Post with Comments */
    .split { display:flex; flex-direction:row; width:80%; max-width:1000px; position:relative; }
    .split-left {
        flex:1;
        min-width:400px;
        border-right:1px solid var(--border-color);
        background:#fff;
        display:flex;
        flex-direction:column;
    }
    .split-right {
        position:absolute;
        top:0;
        right:0;
        width:350px;
        height:100%;
        background:#fff;
        transform: translateX(100%);
        transition: transform 0.3s ease-out;
        display:flex;
        flex-direction:column;
        box-shadow: -2px 0 8px rgba(0,0,0,0.1);
    }
    .split-right.active {
        transform: translateX(0);
    }
    .comments { flex:1; overflow-y:auto; padding:15px; font-size:14px; color:#333; }
    .comment { margin-bottom:12px; line-height:1.4; }
    .comment strong { color:#333; }
    .comment-input { display:flex; border-top:1px solid var(--border-color); padding:8px 10px; background:#fff; flex-shrink:0; }
    .comment-input input { flex:1; border:none; padding:10px; outline:none; font-size:14px; }
    .comment-input button { border:none; background:var(--main-theme-color); color:#fff; padding:10px 15px; cursor:pointer; border-radius:5px; font-weight:bold; margin-left:8px; transition:0.2s; }
    .comment-input button:hover { background:#e0b03f; }

    /* Shorts */
    .shorts-container { flex:1; margin-left:60px; display:flex; justify-content:center; align-items:center; position:relative; background:#000; overflow:hidden; }
    .shorts-video-wrapper { position:relative; width:360px; height:640px; border-radius:12px; overflow:hidden; box-shadow:0 4px 20px rgba(0,0,0,0.5); transition: transform 0.3s ease-out; z-index:10; }
    .shorts-video-wrapper.shifted { transform:translateX(-175px); }
    .shorts-video { width:100%; height:100%; object-fit:cover; background:#222; }
    .shorts-actions { position:absolute; right:20px; bottom:20px; display:flex; flex-direction:column; gap:25px; color:#fff; font-size:26px; text-align:center; text-shadow:0 1px 3px rgba(0,0,0,0.4); z-index:15; }
    .shorts-actions span { display:flex; flex-direction:column; align-items:center; gap:4px; cursor:pointer; transition:transform 0.2s ease; }
    .shorts-actions span:hover { transform:scale(1.05); }
    .shorts-actions small { font-size:12px; font-weight:bold; color:#fff; }
    .shorts-actions img { width:26px; height:26px; }
    .shorts-comments { position:absolute; top:0; right:0; width:350px; height:100%; background:#fff; border-left:1px solid var(--border-color); display:flex; flex-direction:column; transform:translateX(100%); transition:transform 0.3s ease-out; z-index:20; }
    .shorts-comments.active { transform:translateX(0); }
    .shorts-comments .header { display:flex; align-items:center; justify-content:space-between; padding:12px 15px; border-bottom:1px solid var(--border-color); flex-shrink:0; }
    .shorts-comments .header strong { font-size:16px; color:#333; }
    .shorts-comments .header .back-btn { font-size:20px; margin-right:0; color:#777; }
</style>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

<!-- 사이드바 -->
<div class="sidebar">
    <div class="sidebar-top-icons">
        <img src="img/Home.png" class="sidebar-icon active" id="home-icon"> 
        <img src="img/search.png" class="sidebar-icon" id="search-icon"> 
        <img src="img/Compass.png" class="sidebar-icon" id="compass-icon"> 
        <img src="img/Award.png" class="sidebar-icon" id="award-icon"> 
    </div>
    <div class="sidebar-bottom-icons">
        <img src="img/User.png" class="sidebar-icon" id="user-icon"> 
        <img src="img/Log out.png" class="sidebar-icon" id="logout-icon"> 
    </div>
</div>

<!-- Feed Page -->
<div class="page active" id="feedPage">
    <div class="feed-wrapper">
        <div class="feed-header">
            <div class="feed-header-left">
                <input type="text" placeholder="위치 검색..." class="location-search-input">
                <button onclick="setCurrentLocation()">위치 설정</button>
            </div>
            <span class="current-location" id="currentLocationDisplay">현재 위치: 설정 안됨</span>
        </div>
        <div class="feed">
            <div class="thumbnail shorts" onclick="openShorts()"><img src="img/food.jpg"></div>
            <div class="thumbnail square" onclick="openPost()"><img src="img/food.jpg"></div>
            <div class="thumbnail shorts" onclick="openShorts()"><img src="img/food.jpg"></div>
            <div class="thumbnail shorts" onclick="openShorts()"><img src="img/food.jpg"></div>
            <div class="thumbnail square" onclick="openPost()"><img src="img/food.jpg"></div>
            <div class="thumbnail shorts" onclick="openShorts()"><img src="img/food.jpg"></div>
            <div class="thumbnail shorts" onclick="openShorts()"><img src="img/food.jpg"></div>
            <div class="thumbnail square" onclick="openPost()"><img src="img/food.jpg"></div>
            <div class="thumbnail shorts" onclick="openShorts()"><img src="img/food.jpg"></div>
            <div class="thumbnail shorts" onclick="openShorts()"><img src="img/food.jpg"></div>
            <div class="thumbnail square" onclick="openPost()"><img src="img/food.jpg"></div>
            <div class="thumbnail shorts" onclick="openShorts()"><img src="img/food.jpg"></div>
        </div>
    </div>
</div>

<!-- Post Page -->
<div class="page" id="postPage">
    <div class="post-container">
        <div class="post-card">
            <div class="post-header">
                <div class="back-btn" onclick="goBack()">✕</div>
                <div class="profile-dot"></div><span>user_456</span>
            </div>
            <img src="img/food.jpg" class="post-img">
            <div class="post-content">따끈한 국밥과 김 조합! 정말 맛있어요. 든든한 한끼 식사로 최고입니다.</div>
            <div class="post-footer">
                <div class="icons">
                    <span><img src="img/heart.png"></span> 
                    <span onclick="openComments()"><img src="img/save.png"></span> 
                    <span><img src="img/chat.png"></span> 
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Post With Comments -->
<div class="page" id="postWithComments">
    <div class="post-container">
        <div class="split">
            <div class="split-left">
                <div class="post-header">
                    <div class="back-btn" onclick="goBack()">✕</div>
                    <div class="profile-dot"></div><span>user_456</span>
                </div>
                <img src="img/food.jpg" class="post-img">
                <div class="post-content"></div>
            </div>
            <div class="split-right">
                <div class="comments">
                    <div class="comment"><strong>user_1</strong> 맛있어보여요!</div>
                    <div class="comment"><strong>user_2</strong> 저도 가보고 싶네요!</div>
                </div>
                <div class="comment-input">
                    <input type="text" placeholder="댓글 달기..."><button><img src = "img/up.png"></button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Shorts Page -->
<div class="page" id="shortsPage">
    <div class="shorts-container">
        <div class="back-btn" style="position:absolute;top:20px;left:80px;color:#fff; z-index:25;" onclick="goBack()">✕</div>
        <div class="shorts-video-wrapper" id="shortsVideoWrapper">
            <video class="shorts-video" controls muted loop autoplay>
                <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
            </video>
            <div class="shorts-actions">
                <span><img src="img/Vector.png"></span>
                <span onclick="toggleShortsComments()"><img src="img/Vector (1).png"></span>
                <span><img src="img/Vector (2).png"></span>
            </div>
        </div>
        <div class="shorts-comments" id="shortsComments">
            <div class="header">
                <strong>댓글</strong>
                <span class="back-btn" onclick="toggleShortsComments()">✕</span>
            </div>
            <div class="comments">
                <div class="comment"><strong>user_3</strong> 와 맛있겠다!</div>
                <div class="comment"><strong>user_4</strong> 영상 편집 너무 잘하시네요!</div>
            </div>
            <div class="comment-input">
                <input type="text" placeholder="댓글 달기..."><button><img src="img/up.png"></button>
            </div>
        </div>
    </div>
</div>

<script>
    let historyStack = ["feedPage"];
    let currentLocation = "설정 안됨";

    function showPage(pageId) {
        document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
        document.getElementById(pageId).classList.add("active");
        if(historyStack[historyStack.length-1] !== pageId) historyStack.push(pageId);
        resetShortsComments();
        updateSidebarActiveIcon();
    }

    function goBack() {
        document.querySelector(".split-right")?.classList.remove("active");
        if(historyStack.length>1){
            historyStack.pop();
            const prev = historyStack[historyStack.length-1];
            document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
            document.getElementById(prev).classList.add("active");
            resetShortsComments();
            updateSidebarActiveIcon();
        }
    }

    function openPost(){ showPage("postPage"); }
    function openComments(){ 
        showPage("postWithComments"); 
        document.querySelector(".split-right").classList.add("active");
    }
    function openShorts(){ 
        showPage("shortsPage"); 
        const video = document.querySelector("#shortsPage .shorts-video");
        if(video) video.play().catch(()=>{});
    }

    function toggleShortsComments(){
        document.getElementById("shortsComments").classList.toggle("active");
        document.getElementById("shortsVideoWrapper").classList.toggle("shifted");
    }

    function resetShortsComments(){
        document.getElementById("shortsComments").classList.remove("active");
        document.getElementById("shortsVideoWrapper").classList.remove("shifted");
    }

    function setCurrentLocation(){
        const input = document.querySelector(".location-search-input");
        if(input.value.trim()!==""){
            currentLocation = input.value.trim();
            document.getElementById("currentLocationDisplay").textContent = "현재 위치: "+currentLocation;
            input.value="";
        } else alert("위치를 입력해주세요.");
    }

    function updateSidebarActiveIcon(){
        document.querySelectorAll(".sidebar-icon").forEach(i=>i.classList.remove("active"));
        const page = historyStack[historyStack.length-1];
        if(page==="feedPage"||page==="postPage"||page==="postWithComments") document.getElementById("home-icon").classList.add("active");
        else if(page==="shortsPage") document.getElementById("compass-icon").classList.add("active");
    }
    document.addEventListener('DOMContentLoaded', updateSidebarActiveIcon);
</script>
</body>
</html>
